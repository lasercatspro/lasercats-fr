export const meta = {
  author: 'Lasercats',
  date: '2022-10-19',
  type: "post",
  title: 'Trois outils indispensables pour dÃ©velopper avec PostgreSQL',
  description:
    "Dans cet article, on dÃ©couvre 3 gestes simples pour sâ€™amuser avec PostgreSQL : pgcli pour les opÃ©rations en ligne de commande, Explain et Analyse pour comprendre les requÃªtes et enfin pagila comme base de test disponible sur internet.",
  imagePreview: "/assets/images/articles/pgcli.png"
}

export default (props) => <article meta={meta} {...props} />

Câ€™est souvent dur dâ€™aimer le SQL. Pourtant câ€™est souvent nÃ©cessaire de savoir ce qui se passe sous le capot dâ€™une app rails par exemple. Dans cet article, on dÃ©couvre 3 gestes simples pour sâ€™amuser avec PostgreSQL : **pgcli** pour les opÃ©rations en ligne de commande, **Explain et Analyse** pour comprendre les requÃªtes et enfin **pagila** comme base de test disponible sur internet.

## **pgcli, et la couleur fut**

Parfois on doit faire du â€œvraiâ€ PostgreSQL, en ligne de commande jâ€™entends. Il y a tout un tas de raisons pour Ã§a. Ã‡a peut commencer, par exemple, avec un utilisateur Ã  qui il manque le droit de crÃ©er une tableâ€¦ Le premier rÃ©flexe est souvent dâ€™utiliser **psql**, un utilitaire fonctionnel mais trÃ¨s austÃ¨re, qui nâ€™aide pas Ã  se sentir Ã  lâ€™aise avec le langage. Et bien sachez quâ€™il existe **pgcli**, qui fait la mÃªme chose que **psql** mais avec de la couleur ğŸ¨ et une [super autocomplÃ©tion](https://www.pgcli.com/completion) ğŸª¶ qui propose non seulement les commandes et leurs options mais aussi les bases et les colonnes sur lesquelles vous pouvez agir. On a enfin lâ€™impression de comprendre ce quâ€™on tape.

[Plus dâ€™informations sur leur site](https://www.pgcli.com/)

<img src={'/assets/images/articles/pgcli.png'} alt="pgcli" />

## **Explain / Analyse, tout comprendre aux requÃªtes**

Lâ€™autre raison de toucher Ã  postgres, câ€™est quand on sâ€™attaque aux **performances**. Ã€ mesure que la base grossit, des requÃªtes qui avaient lâ€™air tout Ã  fait ok deviennent des gouffres Ã  ressource, le plus souvent pour de mauvaises raisons. Sachez que vous pouvez prÃ©fixer nâ€™importe quelle requÃªte avec **EXPLAIN** (suivi de diffÃ©rentes options, dont **ANALYSE**) pour obtenir lâ€™explication Ã©tape par Ã©tape de ce qui se passe quand la requÃªte Ã  lieu : parcours des donnÃ©es, temps de calcul, etc

Mieux encore, vous pouvez aller faire dÃ©chiffrer ce rÃ©sultat en anglais comprÃ©hensible sur le site de [explain.dalibo](https://explain.dalibo.com)

<img src={'/assets/images/articles/dalibo.png'} alt="dalibo" />

## **pagila, une base pour tous vos tests**

Vous voulez tester tout Ã§a sur une base bien lourde pour voir ce qui se passe Ã  grande Ã©chelle, mais vous ne voulez pas dÃ©glinguer vos bases de prod ? Ã‡a sâ€™entend. Et bien lÃ  encore sachez quâ€™il existe des â€œbases de testâ€ PostgreSQL sur internet, une des plus connues sâ€™appelle **pagila**, la base de donnÃ©es dâ€™un faux vidÃ©oclub avec 600 clients et 1000 films.

[Le github](https://github.com/devrimgunduz/pagila) manque dâ€™une vraie doc, pour utiliser la base vous devrez :

1. la crÃ©er `CREATE DATABASE pagila;`
2. crÃ©er sa structure `psql -d pagila -f pagila-schema.sql`
3. peupler ses donnÃ©es `psql -d pagila -f pagila-data.sql`
    
<img src={'/assets/images/articles/pagila.png'} alt="pagila" />

## On rÃ©capitule

Vous dÃ©veloppez des bases de donnÃ©es **postgresql**, et vous avez lâ€™impression de marcher les yeux bandÃ©s dans une grotte pleine dâ€™aspÃ©ritÃ©s. Retrouvez la vue avec ces trois outils :

- **pgcli :** un client en ligne de commande avec la couleur et lâ€™autocompletion
- **Explain / Analyse (+ explain.dalibo)** : pour comprendre et analyser les requÃªtes
- **pagila** : une base de donnÃ©s pour faire tous vos tests

**SQL = FUN ğŸ’ƒ**